node {
    println("Running job ${env.JOB_NAME}")
    def config = readYaml(file:'config.yaml')
    def value = env.getProperty(config.myconfig.key)
    println("Value of property ${config.myconfig.key} is ${value}")     
    
    stage 'Go to project directory'
    dir('d:\\Dane\\Portable\\eclipse\\workspace\\AS400connector\\') {
        stage 'Project clean'
        bat 'mvn clean'
        
        stage 'Project verify'
        bat 'mvn verify'
        
        stage 'Project analize - sonar'
        withSonarQubeEnv('sonar-server') {
                bat 'mvn sonar:sonar'
              }          
     }  

}
