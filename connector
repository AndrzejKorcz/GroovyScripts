node ('master') {    
    def at = '@script'
    def props = readProperties file: "${workspace}${at}/extravars.properties"
    env.WORKSPACE = props.WORKSPACE
    echo "The workspace is ${WORKSPACE}"
    def srcDir = 'd:\\Dane\\Portable\\eclipse\\workspace\\AS400connector\\'

    stage 'Go to project directory'
    dir(srcDir) {
        stage 'Project clean'
        bat 'mvn clean'
        
        stage 'Project verify'
        bat 'mvn verify'
        
        stage 'Project analize - sonar'
        withSonarQubeEnv('sonar-server') {
                bat 'mvn sonar:sonar'
              }   
              
     }  

}
