node ('master') {    
    def props = readProperties file: '${workspace}/extravars.properties'
    env.WORKSPACE = props.WORKSPACE
    echo "The workspace is ${WORKSPACE}"
    def srcDir = 'd:\\Dane\\Portable\\eclipse\\workspace\\AS400connector\\'
    stage 'test'
    script{
                    println("Running job ${env.JOB_NAME}")
                    def props = readProperties file: 'extravars.properties'
                    env.WEATHER = props.WEATHER
                     echo "The weather is ${WEATHER}"
                      }
    stage 'Go to project directory'
    dir(srcDir) {
        stage 'Project clean'
        bat 'mvn clean'
        
        stage 'Project verify'
        bat 'mvn verify'
        
        stage 'Project analize - sonar'
        withSonarQubeEnv('sonar-server') {
                bat 'mvn sonar:sonar'
              }   
              
     }  

}
